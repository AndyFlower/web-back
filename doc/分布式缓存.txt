分布式系统产生的原因：
    第一、互联网环境的应用系统，业务需求复杂，必须进行系统级别的垂直拆分，保证各个业务的业务清晰，格自部署对外业务。
    第二、针对的用户群体广泛，就存在高并发的问题，基于此我们会把不同的应用系统部署到不同的节点上，也需要把不同的数据，分散到不同的物理节点上。
    第三、分布式系统的产生，出现了数据的一致性、安全性、可扩展性、服务器的高可用、高承载能力。
NoSql简介：
    NoSQL，泛指非关系型的数据库, NoSQL数据库的四大分类 :
   键值(Key-Value)存储数据库：这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。如Redis, Voldemort, Oracle BDB
   列存储数据库：这部分数据库通常是用来应对分布式存储的海量数据。键仍然存在，但是它们的特点是指向了多个列。如 HBase, Riak
   文档型数据库：该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，比如JSON。文档型数据库可 以看作是键值数据库的升级版，允许之间嵌套键值。而且文档型数据库比键值数据库的查询效率更高。如：CouchDB, MongoDb
   图形(Graph)数据库：图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是使用灵活的图形模型，并且能够扩展到多个服务器上。NoSQL数据库没有标准的查询语言(SQL)，因此进行数据库查询需要制定数据模型。许多NoSQL数据库都有REST式的数据接口或者查询API。如：Neo4J, InfoGrid, Infinite Graph
Redis+lua脚本解决抢红包的问题：
   http://blog.csdn.net/hengyunabc/article/details/19433779/
rdb aof

Redis目前业界提供三种方式去应用在生产环境
    第一种：使用主从复制的方式
    第二种：使用高可用哨兵、Keepalived的方式
    第三种：集群方式或第三方支持如codis集群等技术

SSDB是一个快速的用来存储十亿级别列表数据的开源 NoSQL 数据库。
    SSDB官网：http://ssdb.io/zh_cn/
    替代 Redis 数据库, Redis 的 100 倍容量
    LevelDB 网络支持, 使用 C/C++ 开发
    Redis API 兼容, 支持 Redis 客户端
    适合存储集合数据, 如 list, hash, zset...
    客户端 API 支持的语言包括: C++、PHP、Python、Cpy、Java、NodeJS、Ruby、Go。
    持久化的队列服务
    主从复制, 负载均衡

redis安装：
   1、下载redis安装包：https://redis.io/
   2、将下载好的tar.gz安装包放到自己要安装的目录
   3、解压tar -zxvf redis-*.tar.gz
   4、进入解压之后的redis文件夹中进行编译 cd redis-*.* ; make
   5、进入到src目录下验证redis-server  redis-cli等文件
   6、建立两个文件夹存放redis命令和配置文件
      mkdir -p /usr/local/redis/etc
      mkdir -p /usr/local/redis/bin
   7、将redis-conf文件移动到/usr/local/redis/etc下
   8、将src文件中的mkreleasehdr.sh redis-benchmark redis-check-aof redis-cli redis-server移动到/usr/local/redis/bin下
   9、修改redis-conf中的daemonize 为yes（设为后台启动）
   10、启动
       /usr/local/redis/bin/redis-server /usr/local/redis/etc/redis-conf
   11、验证是否成功
       ps -ef|grep redis
   12、进入redis客户端
       /usr/local/redis/bin/redis-cli
   13、操作
       keys *
       set name sanglp
       get name
       set age 18
       get age
    14、退出redis客户端
       quit
    15、退出redis服务端
       ①/usr/local/redis/bin/redis-cli shutdown
       ②pkill redis-server
       ③kill  进程号

redis数据类型：
    redis一共分为五种基本数据类型：String Hash List Set ZSet
    1、String类型
    String类型是包含很多种类型的特殊类型，并且是二进制安全的。比如序列化的对象进行存储，比如一张图片二进制存储，比如一个简单的字符串，数值等等。
    set和get方法：
        ①设置值：set name sanglp 取值 get name(设置name多次会被覆盖)
	②删除值：del name
	③使用setnx（not exists）
	    name如果不存在进行设置，存在就不需要进行设置了，返回0.
	④使用setex(expired)
	    setex color 10 red设置color的有效期为10秒，10秒后返回nil(redis中nil表示空)
        ⑤使用setrange替换字符串
	    set email 1308445442@qq.com 
	    setrange email 10 ww(10表示从第几位开始替换，后面跟上替换的字符串)
	⑥使用一次性设置多个和获取多个值的mset mget方法：
	    mset name sanglp age 18 
	    mget name age
	    msetnx name sanglp age 18
	⑦incr和decr方法：对某一个值进行递增和递减
	⑧incrby和decrby方法：对某个值进行指定长度的递增和递减
	⑨append[name]方法：字符串追加
	⑩strlen[name]方法：获取字符串的长度
    2、Hash类型
    Hash类型是String类型的field和value的映射表，或者说一个String集合。他特别适合存储对象，相比较而言，将一个对象类型存储在Hash类型要比存储在String类型里占用更少的内存空间，并方便存取整个对象
    eg:hset myhash filed1 hello(hset值hash的集合，myhash是集合名字，field1是字段名hello为值)使用hget myhash field1获取内容，也可以存储多个值。
       hmset可以进行批量存储多个键值对：hmset myhash sex man addr beijing也可使用hmget进行批量获取多个键值对
       hsetnx
       hincrby和hdecrby:集合的递增和递减
       hexists是否存在key如果存在返回1不存在返回0
       hlen返回hash集合里的所有的健数值
       hdel删除指定的hash的field
       hkeys返回hash里所有的字段
       hvals返回hash的所有value
       hgetall返回hash里所有的key和value
    3、List类型
       List类型是一个链表结构的集合，其主要功能有push pop 获取元素等，List是一个双端链表的结构，我们可以通过相关操作进行集合的头部或者尾部添加删除元素。ist的设计即可以作为栈，又可以作为队列
       lpush方法：从头部加入元素（栈）先进后出
           lpush list1 "hello" lpush list1 "world"
	   lange list1 0 -1 （从头取到末尾）
       rpush方法：从尾部加入元素（队列）先进先出
           rpush list2 "shanxi" rpush list2 "sanglp"
	   lrange list2 0 -1
       insert方法：插入元素
           insert list3 before [集合的元素] [插入的元素]
     4、set类型和zset类型
        set集合是String类型的无序集合，set是通过hashtable实现的，对集合我们可以取交集、并集、差集
	sadd方法：向名称为key的set中添加元素
	         set集合不允许重复元素，smembers查看set集合的元素
	srem方法：删除set集合元素
	spop方法：随机返回删除的key
	sdiff方法：返回两个集合的不同元素
	sdiffstore方法：将返回的不同元素存储到另外一个集合里
	sinter方法：返回集合的交集
	sinterstore方法：返回交集结果，存入set3中
	sunion方法：取并集
	sunionstore方法：取得并集，存入set3中

Redis高级命令及特性：
        返回满足的所有键 keys * 
	exists是否存在指定的key
	expire设置某个key的过期时间，使用ttl查看剩余时间
	persist取消过期时间
	select 选择数据库  数据库为0到15默认进入的是0数据库
	move [key][数据库下标]将当前数据中的key转移到其他数据库中
	randomkey随机返回数据库里的一个key
	rename 重命名key
	echo 打印命令
	dbsize查看数据库的key数量
	info获取数据库信息
	config get实时存储收到的请求（返回相关的配置信息）
	flushdb清空当前数据库，flushall清空所有数据库

Redis的安全性：
     因为redis速度相当快，所以在一台比较好的服务器下，一个外部用户在一秒内可以进行15W次的密码尝试，这意味着需要设定非常强大的密码来防止暴力破解

主从复制：
      1、Master可以拥有多个slave
      2、多个slave可以连接同一个master外，还可以连接其他的slave
      3、主从复制不会阻塞master在同步数据时，master可以继续处理client请求
      4、提供系统的伸缩性

主从复制过程：
      1、slave和master建立连接，发送sync同步命令
      2、master会开启一个后台进程，将数据库快照保存到文件中，同时master主进程会开始收集新的写命令并缓存
      3、后台完成保存后，就将文件发送给slave
      4、slave将文件保存到硬盘上

主从复制配置：
      clone服务器之后修改slave的IP地址
      修改配置文件/usr/local/redis/etc/redis.conf
      第一步：slaveof <masterip> <masterport>
      第二步：masterauth <master-password>
      使用info查看role角色即可知道是主服务或从服务